<section class="container">
  <div class="row"></div>
  <div class="row"></div>
  <div class="row"></div>
  <div class="row">
    <div class="col s12 m4" *ngFor="let course of courses">
      <div class="card sticky-action hoverable">
        <div class="card-image waves-effect waves-block waves-light">
          <img [src]="course.img_url" class="activator">
          <span class="card-title text-shadow"><strong class="white-text">{{ course.course | titlecase }}</strong></span>
        </div>
        <div class="card-content">
          <span class="card-title activator grey-text text-darken-4">
            <i class="material-icons left">school</i><strong>{{ course.teacher | titlecase }}</strong>
            <i *ngIf="user.rol !== 'student'" class="material-icons right">more_vert</i>
          </span>
        </div>
        <div *ngIf="user.rol !== 'student'" class="card-reveal">
          <span class="card-title grey-text text-darken-4"><i class="material-icons right">close</i><strong>{{ course.course | titlecase }}</strong></span>
          <ul class="collection with-header">
            <li class="collection-item valign-wrapper row">
              <div class="col s9">Alumnos</div><a (click)="openAddStudentModal(course.school_id, course.course_id)" class="secondary-content btn uss-color waves-effect waves-light right col s3"><i class="material-icons white-text">add_circle_outline</i></a>
            </li>
            <li class="collection-item valign-wrapper row">
              <div class="col s9">Editar curso</div><a class="secondary-content btn uss-color waves-effect waves-light right col s3"><i class="material-icons white-text">edit</i></a>
            </li>
            <li class="collection-item valign-wrapper row">
              <div class="col s9">Eliminar curso</div><a class="secondary-content btn uss-color delete-hover darken-4 waves-effect waves-light right col s3"><i class="material-icons white-text">delete</i></a>
            </li>
          </ul>
        </div>
        <div class="card-action center">
          <a class="btn waves-effect waves-light uss-color" routerLink="{{ course.course_id }}/{{ course.course }}">Ingresar</a>
        </div>
      </div>
    </div>
    <div class="col s12 m4" *ngIf="user.rol == 'teacher'">
      <div class="card hoverable">
        <div class="card-image uss-color-gradient valign-wrapper">
          <!-- <img [src]="course.img_url"> -->
          <i class="material-icons grey-text center-block fa-10x">add_circle_outline</i>
          <span class="card-title text-shadow"><strong class="white-text">Crear nuevo curso</strong></span>
        </div>
        <div class="card-content">
          <ul>
            <li><i class="material-icons left">school</i><strong>{{ user.name + ' ' + user.lastName | titlecase }}</strong></li>
          </ul>
        </div>
        <div class="card-action center">
          <a (click)="openCourseModal()" class="btn waves-effect waves-light uss-color">Crear</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- estructura del modal de creación de curso -->
<div id="modal1" class="modal white row transparent z-depth-0" materialize="modal" [materializeParams]="[{dismissible: false}]" [materializeActions]="modalNewCourse">
  <div class="col s12 m8 offset-m2">
    <form (ngSubmit)="addCourse()" class="card-panel row hoverable no-margin" materialize [formGroup]="newCourseForm" ngNativeValidate autocomplete="off">
      <div class="col s12 center">
        <h5><strong>Crear nuevo curso</strong></h5>
      </div>
      <div class="input-field col s12">
        <input formControlName="name" id="name" type="text" required class="validate">
        <label for="name">Nombre</label>
      </div>
      <div class="input-field col s12">
        <input formControlName="img_url" id="img_url" type="text" required class="validate">
        <label for="img_url">Imágen (url)</label>
      </div>
      <div class="row"></div>
      <div class="col s12">
        <button type="submit" class="hoverable btn col s12 waves-effect waves-light uss-color" value="Crear"><strong class="white-text">Crear</strong></button>
      </div>
      <div class="row"></div>
      <div class="col s12">
        <a (click)="closeCourseModal()" class="btn transparent btn-secondary waves-effect col s12">Cancelar</a>
      </div>
    </form>
  </div>
</div>

<!-- estructura del modal de agregar alumno a curso -->
<div id="modal1" class="modal student-modal white row transparent z-depth-0" materialize="modal" [materializeParams]="[{dismissible: false}]" [materializeActions]="modalAddStudent">
  <div class="col s12 m8 offset-m2">
    <div class="card-panel row no-margin">
      <a (click)="closeAddStudentModal()"><i class="material-icons right">close</i></a>
      <div class="col s12 center">
        <h5><strong>Agregar estudiante al curso</strong></h5>
      </div>
      <table class="col s12 striped">
        <thead>
          <tr>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>Email</th>
              <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of students">
            <td>{{student.name}}</td>
            <td>{{student.lastName}}</td>
            <td>{{student.email}}</td>
            <th class="row">
              <a (click)="addStudentToCourse(student)" class="waves-effect waves-light btn uss-color right"><i class="material-icons white-text">add_circle_outline</i></a>
            </th>
          </tr>
        </tbody>
      </table>
      <div class="col s12 center">
        <h5><strong>Estudiantes del curso</strong></h5>
      </div>
      <table class="col s12 striped">
        <thead>
          <tr>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>Email</th>
              <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of courseStudents">
            <td>{{student.name}}</td>
            <td>{{student.lastName}}</td>
            <td>{{student.email}}</td>
            <th class="row">
              <a (click)="removeStudentToCourse(student)" class="waves-effect waves-light btn uss-color delete-hover right"><i class="material-icons white-text">delete</i></a>
            </th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>